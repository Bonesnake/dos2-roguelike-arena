Version 1
SubGoalCombiner SGC_AND
INITSECTION
DB_RoguelikeArena_AtmosphereTriggers(1, (TRIGGERGUID)TRIGGERGUID_AtmosphereTrigger_000_76228a1a-d6ce-4e33-889f-097c65cbb4bf);
DB_RoguelikeArena_AtmosphereTriggers(2, TRIGGERGUID_AtmosphereTrigger_000__000_7aee728b-d4d5-806b-39c3-1d9348eda667);
DB_RoguelikeArena_AtmosphereTriggers(3, TRIGGERGUID_AtmosphereTrigger_000__000_accc0b5a-57e0-89b2-3883-50d495aef017);
DB_RoguelikeArena_AtmosphereTriggers(4, TRIGGERGUID_AtmosphereTrigger_000__000_a462782b-ab8f-8b26-4cc9-b65dd507cf60);
DB_RoguelikeArena_AtmosphereTriggers(5, TRIGGERGUID_AtmosphereTrigger_000__000_6479ba18-1267-87bb-390b-d45a006213c7);
DB_RoguelikeArena_AtmosphereTriggers(6, TRIGGERGUID_AtmosphereTrigger_000__000_5fb1279e-4d2e-8874-6947-17999f91f2a4);
DB_RoguelikeArena_AtmosphereTriggers(7, TRIGGERGUID_AtmosphereTrigger_000__000_4d324baa-c2e6-8590-498c-b024000f0fca);

DB_RoguelikeArena_Atmospheres(1, "746dd96b-09e1-4b82-b81a-5e46935c372a");
DB_RoguelikeArena_Atmospheres(1, "08c6e64b-ca3a-4df2-a466-740e07a26539");
DB_RoguelikeArena_Atmospheres(1, "5ce1ed32-25fd-4e12-8570-892d92b6ef25");
DB_RoguelikeArena_Atmospheres(1, "160f358d-f266-4f8e-9e90-17ac6b108359");
DB_RoguelikeArena_Atmospheres(1, "e97b0703-3a70-4c03-afbc-f5174227f91b");
DB_RoguelikeArena_Atmospheres(1, "c29f63ae-ea3b-42ff-a886-4aa958a2ca6e");
DB_RoguelikeArena_Atmospheres(1, "c8bf7b1b-ed3e-4640-99ce-36ed24dabdb7");
DB_RoguelikeArena_Atmospheres(1, "a2ae3602-fa8d-4968-a95e-7a814cda40b3");
DB_RoguelikeArena_Atmospheres(1, "d1daeeb4-11ac-42eb-8792-bf0058bd0a7c");
DB_RoguelikeArena_Atmospheres(1, "efa0f93a-aa4d-4eaa-8369-40b4d7df4279");

DB_RoguelikeArena_Atmospheres(2, "df37a804-ec9d-4cc0-959c-dd639211c58d");
DB_RoguelikeArena_Atmospheres(2, "2960242d-be91-4599-a3a0-8ea4f53c29b7");

DB_RoguelikeArena_Atmospheres(3, "12f866ca-a2e9-4da2-831c-d7d031638160");
DB_RoguelikeArena_Atmospheres(3, "2052f790-d2d7-4cf7-95f0-4de478e98d28");
DB_RoguelikeArena_Atmospheres(3, "48f8c648-2bcc-45ad-9083-a2e3863f6908");
DB_RoguelikeArena_Atmospheres(3, "8589e64c-386f-4f6c-a648-3ee882c50aee");
DB_RoguelikeArena_Atmospheres(3, "e8440c56-f9d0-4633-b794-a215bb287f0e");
DB_RoguelikeArena_Atmospheres(3, "d3667861-de0f-44c0-af86-ed3a7bf879e5");
DB_RoguelikeArena_Atmospheres(3, "1c66b79a-7722-4bef-9216-6366d85bb280");

DB_RoguelikeArena_Atmospheres(4, "303ea3cc-ec3f-4304-a100-712ec7948fb3");
DB_RoguelikeArena_Atmospheres(4, "0077f217-0c6b-46c7-b954-741322f3388e");
DB_RoguelikeArena_Atmospheres(4, "f6eaf2d1-d585-4306-8507-e1470a7a62fe");
DB_RoguelikeArena_Atmospheres(4, "4065606a-96c6-42e0-9783-1fe1e220cce6");
DB_RoguelikeArena_Atmospheres(4, "232833f3-8270-46fb-bb8b-fdcdb27414b6");
DB_RoguelikeArena_Atmospheres(4, "484a9196-965a-4e79-b4ee-74196f6058b1");

DB_RoguelikeArena_Atmospheres(5, "232833f3-8270-46fb-bb8b-fdcdb27414b6");
DB_RoguelikeArena_Atmospheres(5, "6b647fc9-1f97-4f53-840e-656506d8d19f");
DB_RoguelikeArena_Atmospheres(5, "aea7af91-7f6c-46c0-be11-dbf8a9ec3f9d");
DB_RoguelikeArena_Atmospheres(5, "df7c8fd1-c879-47f4-97ef-8b80fa29a441");
DB_RoguelikeArena_Atmospheres(5, "8b0f9d80-d583-45c9-ba2b-62577d3a25f6");

DB_RoguelikeArena_Atmospheres(6, "0df84336-da38-4791-afca-32d11120a0c3");
DB_RoguelikeArena_Atmospheres(6, "7cc0be96-2ece-4cb5-886b-e24b8a8b51e6");
DB_RoguelikeArena_Atmospheres(6, "88e8bb21-4974-4327-bbf1-fe508575a630");

DB_RoguelikeArena_Atmospheres(7, "919f3ed5-38d4-4d54-91bc-31ce21734a30");
DB_RoguelikeArena_Atmospheres(7, "75e039d7-0385-4374-962c-aa89cdae5bfb");
DB_RoguelikeArena_Atmospheres(7, "bf24b070-e9c0-4430-9f4c-99b532004aa9");
DB_RoguelikeArena_Atmospheres(7, "358c9db9-ccda-40dc-a8c8-bb417343f6eb");
DB_RoguelikeArena_Atmospheres(7, "7ac643f4-a208-4406-accf-ac2a42dc782f");
DB_RoguelikeArena_Atmospheres(7, "31343cb8-7bb2-4e1c-844c-2dbb5c0f5651");

KBSECTION
PROC
PROC_RoguelikeArena_ArenaStarted(_Arena, _, _, _)
THEN
PROC_RoguelikeArena_StringPoolClear("AtmospherePool");
PROC_RoguelikeArena_StringPoolAddAtmospheres(_Arena);
PROC_RoguelikeArena_SetRandomAtmosphere(_Arena);

PROC
PROC_RoguelikeArena_SetRandomAtmosphere((INTEGER)_Arena)
AND
DB_RoguelikeArena_AtmosphereTriggers(_Arena, _Trigger)
AND
QRY_RoguelikeArena_StringPoolSelectRandom("AtmospherePool")
AND
DB_RoguelikeArena_StringPoolSelectedValue("AtmospherePool", _Atmosphere)
THEN
TriggerSetAtmosphere(_Trigger, _Atmosphere);

PROC
PROC_RoguelikeArena_StringPoolAddAtmospheres((INTEGER)_Arena)
AND
DB_RoguelikeArena_Atmospheres(_Arena, _Atmosphere)
THEN
PROC_RoguelikeArena_StringPoolAdd("AtmospherePool", _Atmosphere);
EXITSECTION

ENDEXITSECTION
ParentTargetEdge "RoguelikeArena_Arena"
